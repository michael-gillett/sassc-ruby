import ChildRowWrapper from 'components/parentChildComponent/childRowWrapper';

const ChildComponent = React.createClass({
  render() {
    const { children, childrenMetaData, childComponentConfigs } = this.props;

    let bodyTextClass = '';
    let bodyText = '';

    if (!childrenMetaData.initialFetchComplete) {
      bodyText = childComponentConfigs.fetchingText;
    } else if (childrenMetaData.errorFetching) {
      bodyText = childComponentConfigs.errorText;
    } else if (children.length === 0) {
      bodyText = childComponentConfigs.emptyText;
    } else {
      if (childrenMetaData.isFetching) {
        bodyTextClass = "fetching-page";
      }
      bodyText = (
        <div className={bodyTextClass}>
          {
            _.map(children, (child, i) => {
              return (
                <ChildRowWrapper
                  key={i}
                  child={child}
                  ChildRow={this.props.ChildRow}
                  childWrapperOptions={this.props.childWrapperOptions}
                  childRowOptions={this.props.childRowOptions}
                />
              );
            })
          }
        </div>
      );
    }
    return (
      <div>
        {bodyText}
      </div>
    );
  }
});

export default ChildComponent;
