---
version: 2                        # version of kdt to be used
default_flags:
  pull_policy: IfNotPresent
artifacts:
  - name: gcp-prod
    image_registry: gcp
    flags:
      target: gcp-prod
      environment: prod
      cloud: gcp
      cloudsql_instance_name: liveramp-eng-actfs:us-central1-a:go-links
      cloudsql_port: 3306
  - name: gcp-dev
    image_registry: gcp
    flags:
      target: gcp-dev
      environment: staging
      cloud: gcp
      cloudql_instance_name: liveramp-eng-actfs-dev: us-central1-a:go-links-development
      cloudsql_port: 3306
  - name: local
    image_registry: local-registry
    flags:
      image_tag: latest
      target: local
      environment: staging
      pull_policy: Never
flavors:
  default: {}
image_registries:                 # define image registries used here
  - name: gcp                     # deploy to gcr
    driver: gcp
    prefix: gcr.io/liveramp-eng
  - name: local-registry                     # build local image
    prefix: local-registry
    driver: noop
